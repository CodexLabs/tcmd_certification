var ui = require_once('js/app/common/ui');

exports.DetailWindow = function(fugitive) {
	var win = ui.window(fugitive.name||'aynie',{
		orientationModes: [
			Ti.UI.PORTRAIT
		]
	});
	ui.addBackButtonView(win);
	
	var topSection = Ti.UI.createView({
		backgroundImage:'images/detail_bg.png',
		height:122,
		top:0
	});
	win.addChild(topSection);
	
	var fugitiveImage = Ti.UI.createImageView({
		image:fugitive.url||'images/placeholder.png',
		top:10,
		height:90,
		width:90,
		borderRadius:5,
		left:10
	});
	topSection.add(fugitiveImage);
	
	var vitalsView = Ti.UI.createView({
		top:10,
		left:110,
		right:10,
		layout:'vertical'
	});
	
	vitalsView.add(ui.label(fugitive.name,{font:{fontWeight:'bold'}}));
	
	var statusText = 'STILL AT LARGE', 
		statusColor = '#ff0000';
	if (fugitive.captured) {
		statusText = 'Busted!';
		statusColor = '#000';
	}
	vitalsView.add(ui.label(statusText,{color:statusColor,top:5,font:{fontWeight:'bold'}}));
	
	var heightText = 'Unknown';
	if (fugitive.heightFeet) {
		heightText = fugitive.heightFeet+'\' '+fugitive.heightInches+'"';
	}
	vitalsView.add(ui.label('Height: '+heightText,{top:5}));
	
	topSection.add(vitalsView);

	var detailsView = Ti.UI.createView({
		layout:'vertical'
	});
	
	var actionView = Ti.UI.createView({
		layout:'vertical'
	});
	
	var mapView = Ti.UI.createView({
		backgroundColor:'#123'
	});
	
	//add a map view to the scrollable view if needed
	if (fugitive.capturedLat) {
		
	}
	else {
		mapView.add(ui.label('No Location Information Available.',{textAlign:center,color:'#fff'}));
	}
	
	var scrollView = Ti.UI.createScrollableView({
		views:[detailsView,actionView,mapView],
		showPagingControl:true,
		top:122,
		bottom:0,
		pagingControlColor:'#232323',
		pagingControlHeight:30
	});
	win.addChild(scrollView);
	
	

	return win;
};